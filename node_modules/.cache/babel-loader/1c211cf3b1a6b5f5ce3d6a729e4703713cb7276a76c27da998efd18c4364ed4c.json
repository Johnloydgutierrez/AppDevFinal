{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      productFilter: '',\n      inputText: '',\n      salesTransactionNumber: null,\n      tableData: [],\n      quantity: '',\n      upc: '',\n      showProductModal: false,\n      productList: []\n    };\n  },\n  computed: {\n    tableHeaders() {\n      return [{\n        text: 'Product Name',\n        value: 'name'\n      }, {\n        text: 'Price',\n        value: 'price'\n      }, {\n        text: 'Quantity',\n        value: 'quantity'\n      }, {\n        text: 'Subtotal',\n        value: 'subtotal'\n      }];\n    },\n    filteredProductList() {\n      const filterText = this.productFilter.toLowerCase();\n      return this.productList.filter(product => product.name.toLowerCase().includes(filterText));\n    },\n    totalSalesPrice() {\n      return this.tableData.reduce((total, item) => total + item.subtotal, 0);\n    }\n  },\n  created() {\n    this.salesTransactionNumber = this.generateRandomKey();\n    this.getSales();\n  },\n  watch: {\n    showProductModal: 'showProductModalChanged'\n  },\n  methods: {\n    async showProductModalChanged() {\n      if (this.showProductModal) {\n        await this.$nextTick();\n        this.$refs.productFilterInput.focus();\n      }\n    },\n    selectProduct(upc) {\n      this.inputText = upc;\n      this.showProductModal = false;\n    },\n    generateRandomKey() {\n      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n      const length = 8;\n      let result = '';\n      for (let i = 0; i < length; i++) {\n        const randomIndex = Math.floor(Math.random() * characters.length);\n        result += characters.charAt(randomIndex);\n      }\n      return result;\n    },\n    async getSales() {\n      const sales = await axios.get(`api/sales/${this.salesTransactionNumber}`);\n      this.tableData = sales.data.map(item => ({\n        ...item,\n        subtotal: item.quantity * item.price\n      }));\n    },\n    async handleSales() {\n      const sales = await axios.get(`api/setsales/${this.salesTransactionNumber}`);\n      this.salesTransactionNumber = this.generateRandomKey();\n      this.getSales();\n    },\n    async handleEnterKey() {\n      if (this.inputText.includes('@')) {\n        const parts = this.inputText.split('@');\n        console.log('Split parts:', parts);\n        this.quantity = parts[0];\n        this.upc = parts[1];\n      } else {\n        this.upc = this.inputText;\n        this.quantity = '1';\n      }\n      const st = await axios.post('api/isales', {\n        quantity: this.quantity,\n        upc: this.upc,\n        orderID: this.salesTransactionNumber\n      });\n      if (st.data === 'no_result') {\n        const d = await axios.get('api/products');\n        this.productList = d.data;\n        this.showProductModal = true;\n        console.log(this.productList);\n      } else {\n        this.inputText = '';\n        this.getSales();\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","productFilter","inputText","salesTransactionNumber","tableData","quantity","upc","showProductModal","productList","computed","tableHeaders","text","value","filteredProductList","filterText","toLowerCase","filter","product","name","includes","totalSalesPrice","reduce","total","item","subtotal","created","generateRandomKey","getSales","watch","methods","showProductModalChanged","$nextTick","$refs","productFilterInput","focus","selectProduct","characters","length","result","i","randomIndex","Math","floor","random","charAt","sales","get","map","price","handleSales","handleEnterKey","parts","split","console","log","st","post","orderID","d"],"sources":["D:\\laragon\\www\\AppDevFinal\\src\\views\\sales\\Invoicee.vue"],"sourcesContent":["<template>\r\n    <div id=\"app\">\r\n      <div class=\"mb-3\">\r\n        <div v-if=\"salesTransactionNumber\">\r\n          Sales Transaction Number: <b>{{ salesTransactionNumber }}</b>\r\n        </div>\r\n        <div class=\"mb-3\" >Total Price: <b>{{ totalSalesPrice.toFixed(2) }}</b></div>\r\n    \r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>Price</th>\r\n              <th>Quantity</th>\r\n              <th>Total</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"(item, index) in tableData\" :key=\"index\">\r\n              <td>{{ item.name }}</td>\r\n              <td>{{ item.price }}</td>\r\n              <td>{{ item.quantity }}</td>\r\n              <td>{{ item.quantity * item.price }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    \r\n      <div class=\"mb-3\">\r\n        <label for=\"inputText\">Fixed Input Text</label>\r\n        <input class=\"form-control\"\r\n          type=\"text\"\r\n          id=\"inputText\"\r\n          v-model=\"inputText\"\r\n          @keydown.enter=\"handleEnterKey\"\r\n          @keydown.ctrl.enter.prevent=\"handleSales\"\r\n        />\r\n      </div>\r\n    \r\n      <div v-if=\"showProductModal\">\r\n        <div class=\"modal\" @click=\"showProductModal = false\">\r\n          <div class=\"modal-content\" style=\"max-width: 600px;\">\r\n            <div class=\"modal-header\">\r\n              <h2 class=\"headline\">Products List</h2>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n              <label for=\"productFilter\">Filter Products</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"productFilter\"\r\n                v-model=\"productFilter\"\r\n                @input=\"filterProducts\"\r\n                ref=\"productFilterInput\"\r\n              />\r\n    \r\n              <ul style=\"max-height: 300px; overflow-y: auto;\">\r\n                <li v-for=\"(product, index) in filteredProductList\" :key=\"index\">\r\n                  <div>\r\n                    <div>{{ product.name + \"  -   \" + product.price }}</div>\r\n                    <div>{{ product.description }}</div>\r\n                  </div>\r\n                  <div>\r\n                    <button @click=\"selectProduct(product.upc)\">Select</button>\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n              <button @click=\"showProductModal = false\">Close</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    </template>\r\n  \r\n  <script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      productFilter: '',\r\n      inputText: '',\r\n      salesTransactionNumber: null,\r\n      tableData: [],\r\n      quantity:'',\r\n      upc:'',\r\n      showProductModal: false,\r\n      productList: [],\r\n    };\r\n  },\r\n  computed:{\r\n    tableHeaders() {\r\n      return [\r\n        { text: 'Product Name', value: 'name' },\r\n        { text: 'Price', value: 'price' },\r\n        { text: 'Quantity', value: 'quantity' },\r\n        { text: 'Subtotal', value: 'subtotal' }, \r\n      ];\r\n    },\r\n    filteredProductList() {\r\n      const filterText = this.productFilter.toLowerCase();\r\n      return this.productList.filter(product =>\r\n        product.name.toLowerCase().includes(filterText)\r\n      );\r\n    },\r\n    totalSalesPrice() {\r\n      return this.tableData.reduce((total, item) => total + item.subtotal, 0);\r\n    },\r\n  },\r\n  created(){\r\n    this.salesTransactionNumber = this.generateRandomKey();\r\n    this.getSales();\r\n  },\r\n  watch: {\r\n    showProductModal: 'showProductModalChanged',\r\n  },\r\n  methods: {\r\n    async showProductModalChanged() {\r\n      if (this.showProductModal) {\r\n        await this.$nextTick();\r\n        this.$refs.productFilterInput.focus();\r\n      }\r\n    },\r\n\r\n\r\n    selectProduct(upc) {\r\n      this.inputText = upc;\r\n      this.showProductModal = false;\r\n    },\r\n    generateRandomKey() {\r\n      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\r\n      const length = 8;\r\n      let result = '';\r\n      for (let i = 0; i < length; i++) {\r\n        const randomIndex = Math.floor(Math.random() * characters.length);\r\n        result += characters.charAt(randomIndex);\r\n      }\r\n      return result;\r\n    },\r\n    async getSales(){\r\n      const sales = await axios.get(`api/sales/${this.salesTransactionNumber}`);\r\n      this.tableData = sales.data.map(item => ({\r\n        ...item,\r\n        subtotal: item.quantity * item.price,\r\n      }));\r\n      \r\n\r\n      \r\n    },\r\n    async handleSales() {\r\n      const sales = await axios.get(`api/setsales/${this.salesTransactionNumber}`);\r\n      this.salesTransactionNumber = this.generateRandomKey();\r\n      this.getSales();\r\n    },\r\n    async handleEnterKey() {\r\n      if (this.inputText.includes('@')) {\r\n        const parts = this.inputText.split('@');\r\n        console.log('Split parts:', parts);\r\n        this.quantity = parts[0];\r\n        this.upc = parts[1];\r\n      } else {\r\n        this.upc = this.inputText;\r\n        this.quantity = '1';\r\n      }\r\n      const st = await axios.post('api/isales', {\r\n        quantity: this.quantity,\r\n        upc: this.upc,\r\n        orderID: this.salesTransactionNumber,\r\n      });\r\n      if (st.data === 'no_result') {\r\n        const d = await axios.get('api/products');\r\n        this.productList= d.data;\r\n        this.showProductModal = true;\r\n        console.log(this.productList);\r\n      } else {\r\n        this.inputText = '';\r\n        this.getSales();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n  \r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}