{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      productFilter: '',\n      inputText: '',\n      salesTransactionNumber: null,\n      tableData: [],\n      tableHeaders: [],\n      quantity: '',\n      upc: '',\n      showProductModal: false,\n      productList: []\n    };\n  },\n  computed: {\n    tableHeaders() {\n      return [{\n        text: 'Product Name',\n        value: 'name'\n      }, {\n        text: 'Price',\n        value: 'price'\n      }, {\n        text: 'Quantity',\n        value: 'quantity'\n      }, {\n        text: 'Subtotal',\n        value: 'subtotal'\n      }];\n    },\n    filteredProductList() {\n      const filterText = this.productFilter.toLowerCase();\n      return this.productList.filter(product => product.name.toLowerCase().includes(filterText));\n    },\n    totalSalesPrice() {\n      return this.tableData.reduce((total, item) => total + item.subtotal, 0);\n    }\n  },\n  created() {\n    this.salesTransactionNumber = this.generateRandomKey();\n    this.getSales();\n  },\n  watch: {\n    showProductModal: 'showProductModalChanged'\n  },\n  methods: {\n    async showProductModalChanged() {\n      if (this.showProductModal) {\n        await this.$nextTick();\n        this.$refs.productFilterInput.focus();\n      }\n    },\n    selectProduct(upc) {\n      this.inputText = upc;\n      this.showProductModal = false;\n    },\n    generateRandomKey() {\n      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n      const length = 8;\n      let result = '';\n      for (let i = 0; i < length; i++) {\n        const randomIndex = Math.floor(Math.random() * characters.length);\n        result += characters.charAt(randomIndex);\n      }\n      return result;\n    },\n    async getSales() {\n      const sales = await axios.get(`api/sales/${this.salesTransactionNumber}`);\n      this.tableData = sales.data.map(item => ({\n        ...item,\n        subtotal: item.quantity * item.price\n      }));\n    },\n    async handleSales() {\n      const sales = await axios.get(`api/setsales/${this.salesTransactionNumber}`);\n      this.salesTransactionNumber = this.generateRandomKey();\n      this.getSales();\n    },\n    async handleEnterKey() {\n      if (this.inputText.includes('@')) {\n        const parts = this.inputText.split('@');\n        console.log('Split parts:', parts);\n        this.quantity = parts[0];\n        this.upc = parts[1];\n      } else {\n        this.upc = this.inputText;\n        this.quantity = '1';\n      }\n      const st = await axios.post('api/isales', {\n        quantity: this.quantity,\n        upc: this.upc,\n        orderID: this.salesTransactionNumber\n      });\n      if (st.data === 'no_result') {\n        const d = await axios.get('api/products');\n        this.productList = d.data;\n        this.showProductModal = true;\n        console.log(this.productList);\n      } else {\n        this.inputText = '';\n        this.getSales();\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","productFilter","inputText","salesTransactionNumber","tableData","tableHeaders","quantity","upc","showProductModal","productList","computed","text","value","filteredProductList","filterText","toLowerCase","filter","product","name","includes","totalSalesPrice","reduce","total","item","subtotal","created","generateRandomKey","getSales","watch","methods","showProductModalChanged","$nextTick","$refs","productFilterInput","focus","selectProduct","characters","length","result","i","randomIndex","Math","floor","random","charAt","sales","get","map","price","handleSales","handleEnterKey","parts","split","console","log","st","post","orderID","d"],"sources":["D:\\laragon\\www\\AppDevFinal\\src\\views\\sales\\Invoicee.vue"],"sourcesContent":["<template>\r\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-black\">\r\n  <div class=\"container\">\r\n    <router-link to=\"/Admin\" class=\"navbar-brand bg-black\">\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" fill=\"currentColor\" class=\"bi bi-arrow-left-square-fill\" viewBox=\"0 0 20 19\">\r\n<path d=\"M16 14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12zm-4.5-6.5H5.707l2.147-2.146a.5.5 0 1 0-.708-.708l-3 3a.5.5 0 0 0 0 .708l3 3a.5.5 0 0 0 .708-.708L5.707 8.5H11.5a.5.5 0 0 0 0-1z\"/>\r\n</svg>Back</router-link>  \r\n    <div class=\"collapse navbar-collapse\" id=\"navbarNav\">   \r\n    </div>\r\n  </div>\r\n</nav>\r\n  <v-app>\r\n    <v-row>\r\n      <v-col>\r\n        <div v-if=\"salesTransactionNumber\">\r\n              Sales Transaction Number: <b>{{ salesTransactionNumber }}</b>\r\n        </div>\r\n        <div>Total Price: <b>{{ totalSalesPrice.toFixed(2) }}</b></div>\r\n        <br>\r\n        <div class>\r\n        <th>Name</th>\r\n        <th>Price</th>\r\n        <th>Quantity</th>\r\n        <th>SubTotal</th>\r\n      </div>\r\n      <v-data-table :items=\"tableData\" :headers=\"tableHeaders\" dense>\r\n      <template v-slot:items=\"props\">\r\n        <td>{{ props.item.name }}</td>\r\n        <td>{{ props.item.price }}</td>\r\n        <td>{{ props.item.quantity }}</td>\r\n        <td>{{ props.item.quantity * props.item.price }}</td>\r\n      </template>\r\n    </v-data-table>\r\n      </v-col>\r\n    </v-row>\r\n    <v-footer app>\r\n      <v-container>\r\n        <v-row justify=\"center\">\r\n          <v-col cols=\"12\" sm=\"6\">\r\n            <v-text-field\r\n              v-model=\"inputText\"\r\n              label=\"Fixed Input Text\"\r\n              outlined\r\n              @keydown.enter=\"handleEnterKey\"\r\n              @keydown.ctrl.enter.prevent=\"handleSales\"\r\n            ></v-text-field>\r\n          </v-col>\r\n        </v-row>\r\n      </v-container>\r\n    </v-footer>\r\n\r\n    <v-dialog v-model=\"showProductModal\" max-width=\"600\" @click:outside=\"showProductModal = false\">\r\n      <v-card>\r\n        <v-card-title class=\"headline\">\r\n          Products List\r\n        </v-card-title>\r\n        <v-card-text>\r\n          <v-text-field\r\n            v-model=\"productFilter\"\r\n            label=\"Filter Products\"\r\n            outlined\r\n            solo-inverted\r\n            @input=\"filterProducts\"\r\n            ref=\"productFilterInput\"\r\n          ></v-text-field>\r\n          <v-list style=\"max-height: 300px; overflow-y: auto;\">\r\n            <v-list-item v-for=\"(product, index) in filteredProductList\" :key=\"index\">\r\n              <v-list-item-content>\r\n                <v-list-item-title>{{ product.name + \"  -   \" + product.price }}</v-list-item-title>\r\n                <v-list-item-subtitle>{{ product.description }}</v-list-item-subtitle>\r\n              </v-list-item-content>\r\n              <v-list-item-action>\r\n                <v-btn @click=\"selectProduct(product.upc)\">Select</v-btn>\r\n              </v-list-item-action>\r\n            </v-list-item>\r\n          </v-list>\r\n        </v-card-text>\r\n        <v-card-actions>\r\n          <v-btn @click=\"showProductModal = false\">Close</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      productFilter: '',\r\n      inputText: '',\r\n      salesTransactionNumber: null,\r\n      tableData: [],\r\n      tableHeaders: [],\r\n      quantity:'',\r\n      upc:'',\r\n      showProductModal: false,\r\n      productList: [],\r\n    };\r\n  },\r\n  computed:{\r\n    tableHeaders() {\r\n      return [\r\n        { text: 'Product Name', value: 'name' },\r\n        { text: 'Price', value: 'price' },\r\n        { text: 'Quantity', value: 'quantity' },\r\n        { text: 'Subtotal', value: 'subtotal' }, \r\n      ];\r\n    },\r\n    filteredProductList() {\r\n      const filterText = this.productFilter.toLowerCase();\r\n      return this.productList.filter(product =>\r\n        product.name.toLowerCase().includes(filterText)\r\n      );\r\n    },\r\n    totalSalesPrice() {\r\n      return this.tableData.reduce((total, item) => total + item.subtotal, 0);\r\n    },\r\n  },\r\n  created(){\r\n    this.salesTransactionNumber = this.generateRandomKey();\r\n    this.getSales();\r\n  },\r\n  watch: {\r\n    showProductModal: 'showProductModalChanged',\r\n  },\r\n  methods: {\r\n    async showProductModalChanged() {\r\n      if (this.showProductModal) {\r\n        await this.$nextTick();\r\n        this.$refs.productFilterInput.focus();\r\n      }\r\n    },\r\n\r\n\r\n    selectProduct(upc) {\r\n      this.inputText = upc;\r\n      this.showProductModal = false;\r\n    },\r\n    generateRandomKey() {\r\n      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\r\n      const length = 8;\r\n      let result = '';\r\n      for (let i = 0; i < length; i++) {\r\n        const randomIndex = Math.floor(Math.random() * characters.length);\r\n        result += characters.charAt(randomIndex);\r\n      }\r\n      return result;\r\n    },\r\n    async getSales(){\r\n      const sales = await axios.get(`api/sales/${this.salesTransactionNumber}`);\r\n      this.tableData = sales.data.map(item => ({\r\n        ...item,\r\n        subtotal: item.quantity * item.price,\r\n      }));\r\n      \r\n\r\n      \r\n    },\r\n    async handleSales() {\r\n      const sales = await axios.get(`api/setsales/${this.salesTransactionNumber}`);\r\n      this.salesTransactionNumber = this.generateRandomKey();\r\n      this.getSales();\r\n    },\r\n    async handleEnterKey() {\r\n      if (this.inputText.includes('@')) {\r\n        const parts = this.inputText.split('@');\r\n        console.log('Split parts:', parts);\r\n        this.quantity = parts[0];\r\n        this.upc = parts[1];\r\n      } else {\r\n        this.upc = this.inputText;\r\n        this.quantity = '1';\r\n      }\r\n      const st = await axios.post('api/isales', {\r\n        quantity: this.quantity,\r\n        upc: this.upc,\r\n        orderID: this.salesTransactionNumber,\r\n      });\r\n      if (st.data === 'no_result') {\r\n        const d = await axios.get('api/products');\r\n        this.productList= d.data;\r\n        this.showProductModal = true;\r\n        console.log(this.productList);\r\n      } else {\r\n        this.inputText = '';\r\n        this.getSales();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}