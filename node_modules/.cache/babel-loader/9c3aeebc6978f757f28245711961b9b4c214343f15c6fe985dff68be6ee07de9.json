{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, vModelText as _vModelText, withKeys as _withKeys, withModifiers as _withModifiers, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  id: \"app\"\n};\nconst _hoisted_2 = {\n  class: \"mb-3\"\n};\nconst _hoisted_3 = {\n  key: 0\n};\nconst _hoisted_4 = {\n  class: \"mb-3\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"Name\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Price\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Quantity\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Total\")])], -1 /* HOISTED */);\nconst _hoisted_6 = {\n  class: \"mb-3\"\n};\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"inputText\"\n}, \"Fixed Input Text\", -1 /* HOISTED */);\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = {\n  class: \"modal-content\",\n  style: {\n    \"max-width\": \"600px\"\n  }\n};\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"modal-header\"\n}, [/*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"headline\"\n}, \"Products List\")], -1 /* HOISTED */);\nconst _hoisted_11 = {\n  class: \"modal-body\"\n};\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"productFilter\"\n}, \"Filter Products\", -1 /* HOISTED */);\nconst _hoisted_13 = {\n  style: {\n    \"max-height\": \"300px\",\n    \"overflow-y\": \"auto\"\n  }\n};\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = {\n  class: \"modal-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [$data.salesTransactionNumber ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createTextVNode(\" Sales Transaction Number: \"), _createElementVNode(\"b\", null, _toDisplayString($data.salesTransactionNumber), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_4, [_createTextVNode(\"Total Price: \"), _createElementVNode(\"b\", null, _toDisplayString($options.totalSalesPrice.toFixed(2)), 1 /* TEXT */)]), _createElementVNode(\"table\", null, [_hoisted_5, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.tableData, (item, index) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: index\n    }, [_createElementVNode(\"td\", null, _toDisplayString(item.name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.price), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.quantity), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.quantity * item.price), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])]), _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _withDirectives(_createElementVNode(\"input\", {\n    class: \"form-control\",\n    type: \"text\",\n    id: \"inputText\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.inputText = $event),\n    onKeydown: [_cache[1] || (_cache[1] = _withKeys((...args) => $options.handleEnterKey && $options.handleEnterKey(...args), [\"enter\"])), _cache[2] || (_cache[2] = _withKeys(_withModifiers((...args) => $options.handleSales && $options.handleSales(...args), [\"ctrl\", \"prevent\"]), [\"enter\"]))]\n  }, null, 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelText, $data.inputText]])]), $data.showProductModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"div\", {\n    class: \"modal\",\n    onClick: _cache[6] || (_cache[6] = $event => $data.showProductModal = false)\n  }, [_createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"productFilter\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.productFilter = $event),\n    onInput: _cache[4] || (_cache[4] = (...args) => _ctx.filterProducts && _ctx.filterProducts(...args)),\n    ref: \"productFilterInput\"\n  }, null, 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelText, $data.productFilter]]), _createElementVNode(\"ul\", _hoisted_13, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredProductList, (product, index) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index\n    }, [_createElementVNode(\"div\", null, [_createElementVNode(\"div\", null, _toDisplayString(product.name + \"  -   \" + product.price), 1 /* TEXT */), _createElementVNode(\"div\", null, _toDisplayString(product.description), 1 /* TEXT */)]), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.selectProduct(product.upc)\n    }, \"Select\", 8 /* PROPS */, _hoisted_14)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"button\", {\n    onClick: _cache[5] || (_cache[5] = $event => $data.showProductModal = false)\n  }, \"Close\")])])])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["id","class","_createElementVNode","for","style","_createElementBlock","_hoisted_1","_hoisted_2","$data","salesTransactionNumber","_hoisted_3","_toDisplayString","_hoisted_4","$options","totalSalesPrice","toFixed","_hoisted_5","_Fragment","_renderList","tableData","item","index","key","name","price","quantity","_hoisted_6","_hoisted_7","type","inputText","$event","onKeydown","handleEnterKey","args","handleSales","showProductModal","_hoisted_8","onClick","_cache","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","productFilter","onInput","_ctx","filterProducts","ref","_hoisted_13","filteredProductList","product","description","selectProduct","upc","_hoisted_14","_hoisted_15"],"sources":["D:\\laragon\\www\\AppDevFinal\\src\\views\\sales\\Invoicee.vue"],"sourcesContent":["<template>\r\n    <div id=\"app\">\r\n      <div class=\"mb-3\">\r\n        <div v-if=\"salesTransactionNumber\">\r\n          Sales Transaction Number: <b>{{ salesTransactionNumber }}</b>\r\n        </div>\r\n        <div class=\"mb-3\" >Total Price: <b>{{ totalSalesPrice.toFixed(2) }}</b></div>\r\n    \r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>Price</th>\r\n              <th>Quantity</th>\r\n              <th>Total</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"(item, index) in tableData\" :key=\"index\">\r\n              <td>{{ item.name }}</td>\r\n              <td>{{ item.price }}</td>\r\n              <td>{{ item.quantity }}</td>\r\n              <td>{{ item.quantity * item.price }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    \r\n      <div class=\"mb-3 \">\r\n        <label for=\"inputText\">Fixed Input Text</label>\r\n        <input class=\"form-control\"\r\n          type=\"text\"\r\n          id=\"inputText\"\r\n          v-model=\"inputText\"\r\n          @keydown.enter=\"handleEnterKey\"\r\n          @keydown.ctrl.enter.prevent=\"handleSales\"\r\n        />\r\n      </div>\r\n    \r\n      <div v-if=\"showProductModal\">\r\n        <div class=\"modal\" @click=\"showProductModal = false\">\r\n          <div class=\"modal-content\" style=\"max-width: 600px;\">\r\n            <div class=\"modal-header\">\r\n              <h2 class=\"headline\">Products List</h2>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n              <label for=\"productFilter\">Filter Products</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"productFilter\"\r\n                v-model=\"productFilter\"\r\n                @input=\"filterProducts\"\r\n                ref=\"productFilterInput\"\r\n              />\r\n    \r\n              <ul style=\"max-height: 300px; overflow-y: auto;\">\r\n                <li v-for=\"(product, index) in filteredProductList\" :key=\"index\">\r\n                  <div>\r\n                    <div>{{ product.name + \"  -   \" + product.price }}</div>\r\n                    <div>{{ product.description }}</div>\r\n                  </div>\r\n                  <div>\r\n                    <button @click=\"selectProduct(product.upc)\">Select</button>\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n              <button @click=\"showProductModal = false\">Close</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    </template>\r\n  \r\n  <script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      productFilter: '',\r\n      inputText: '',\r\n      salesTransactionNumber: null,\r\n      tableData: [],\r\n      quantity:'',\r\n      upc:'',\r\n      showProductModal: false,\r\n      productList: [],\r\n    };\r\n  },\r\n  computed:{\r\n    tableHeaders() {\r\n      return [\r\n        { text: 'Product Name', value: 'name' },\r\n        { text: 'Price', value: 'price' },\r\n        { text: 'Quantity', value: 'quantity' },\r\n        { text: 'Subtotal', value: 'subtotal' }, \r\n      ];\r\n    },\r\n    filteredProductList() {\r\n      const filterText = this.productFilter.toLowerCase();\r\n      return this.productList.filter(product =>\r\n        product.name.toLowerCase().includes(filterText)\r\n      );\r\n    },\r\n    totalSalesPrice() {\r\n      return this.tableData.reduce((total, item) => total + item.subtotal, 0);\r\n    },\r\n  },\r\n  created(){\r\n    this.salesTransactionNumber = this.generateRandomKey();\r\n    this.getSales();\r\n  },\r\n  watch: {\r\n    showProductModal: 'showProductModalChanged',\r\n  },\r\n  methods: {\r\n    async showProductModalChanged() {\r\n      if (this.showProductModal) {\r\n        await this.$nextTick();\r\n        this.$refs.productFilterInput.focus();\r\n      }\r\n    },\r\n\r\n\r\n    selectProduct(upc) {\r\n      this.inputText = upc;\r\n      this.showProductModal = false;\r\n    },\r\n    generateRandomKey() {\r\n      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\r\n      const length = 8;\r\n      let result = '';\r\n      for (let i = 0; i < length; i++) {\r\n        const randomIndex = Math.floor(Math.random() * characters.length);\r\n        result += characters.charAt(randomIndex);\r\n      }\r\n      return result;\r\n    },\r\n    async getSales(){\r\n      const sales = await axios.get(`api/sales/${this.salesTransactionNumber}`);\r\n      this.tableData = sales.data.map(item => ({\r\n        ...item,\r\n        subtotal: item.quantity * item.price,\r\n      }));\r\n      \r\n\r\n      \r\n    },\r\n    async handleSales() {\r\n      const sales = await axios.get(`api/setsales/${this.salesTransactionNumber}`);\r\n      this.salesTransactionNumber = this.generateRandomKey();\r\n      this.getSales();\r\n    },\r\n    async handleEnterKey() {\r\n      if (this.inputText.includes('@')) {\r\n        const parts = this.inputText.split('@');\r\n        console.log('Split parts:', parts);\r\n        this.quantity = parts[0];\r\n        this.upc = parts[1];\r\n      } else {\r\n        this.upc = this.inputText;\r\n        this.quantity = '1';\r\n      }\r\n      const st = await axios.post('api/isales', {\r\n        quantity: this.quantity,\r\n        upc: this.upc,\r\n        orderID: this.salesTransactionNumber,\r\n      });\r\n      if (st.data === 'no_result') {\r\n        const d = await axios.get('api/products');\r\n        this.productList= d.data;\r\n        this.showProductModal = true;\r\n        console.log(this.productList);\r\n      } else {\r\n        this.inputText = '';\r\n        this.getSales();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n/* Add styling for your footer here */\r\nfooter {\r\n  background-color: #333;\r\n  color: white;\r\n  text-align: center;\r\n  padding: 10px;\r\n}\r\n</style>\r\n  \r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}