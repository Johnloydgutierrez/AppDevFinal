{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data: () => ({\n    dialog: false,\n    quantityModal: false,\n    selectedProduct: null,\n    quantityToAdd: 0,\n    search: '',\n    dialogDelete: false,\n    headers: [{\n      align: 'start',\n      key: 'upc',\n      sortable: false,\n      title: 'UPC'\n    }, {\n      key: 'name',\n      title: 'Name'\n    }, {\n      key: 'description',\n      title: 'Description'\n    }, {\n      key: 'quantity',\n      title: 'Current Stocks'\n    }, {\n      key: 'price',\n      title: 'Price'\n    }, {\n      key: 'cateogry',\n      title: 'Category'\n    }, {\n      title: 'Actions',\n      key: 'actions',\n      sortable: false\n    }],\n    desserts: [],\n    editedIndex: -1,\n    editedItem: {\n      upc: '',\n      name: '',\n      description: '',\n      quantity: 0,\n      price: 0,\n      cateogry: ''\n    },\n    defaultItem: {\n      upc: '',\n      name: '',\n      description: '',\n      quantity: 0,\n      price: 0,\n      cateogry: ''\n    }\n  }),\n  computed: {\n    formTitle() {\n      return this.editedIndex === -1 ? 'New Item' : 'Edit Item';\n    }\n  },\n  watch: {\n    dialog(val) {\n      val || this.close();\n    },\n    dialogDelete(val) {\n      val || this.closeDelete();\n    }\n  },\n  created() {\n    this.initialize();\n  },\n  methods: {\n    openQuantityModal(item) {\n      this.selectedProduct = item;\n      this.quantityToAdd = 0;\n      this.quantityModal = true;\n    },\n    closeQuantityModal() {\n      this.selectedProduct = null;\n      this.quantityToAdd = 0;\n      this.quantityModal = false;\n    },\n    async addQuantity() {\n      const updatedProduct = {\n        ...this.selectedProduct\n      };\n      updatedProduct.quantity += parseInt(this.quantityToAdd);\n      await axios.post('api/updateQuantity', {\n        upc: updatedProduct.upc,\n        quantity: this.quantityToAdd\n      });\n      const index = this.desserts.findIndex(product => product.upc === updatedProduct.upc);\n      this.initialize();\n      this.closeQuantityModal();\n    },\n    async initialize() {\n      const data = await axios.get('api/getProducts');\n      this.desserts = data.data;\n    },\n    editItem(item) {\n      this.editedIndex = this.desserts.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialog = true;\n    },\n    deleteItem(item) {\n      this.editedIndex = this.desserts.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialogDelete = true;\n    },\n    deleteItemConfirm() {\n      this.desserts.splice(this.editedIndex, 1);\n      this.closeDelete();\n    },\n    close() {\n      this.dialog = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    },\n    closeDelete() {\n      this.dialogDelete = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    },\n    async save() {\n      if (this.editedIndex > -1) {\n        // edit\n        const response = await axios.put(`api/updateproduct/${this.editedItem.id}`, this.editedItem);\n        console.log(response.data);\n        Object.assign(this.desserts[this.editedIndex], this.editedItem);\n      } else {\n        const response = await axios.post('api/newproduct', this.editedItem);\n        console.log(response.data);\n        this.desserts.push(this.editedItem);\n      }\n      this.close();\n    }\n  }\n};","map":{"version":3,"names":["axios","data","dialog","quantityModal","selectedProduct","quantityToAdd","search","dialogDelete","headers","align","key","sortable","title","desserts","editedIndex","editedItem","upc","name","description","quantity","price","cateogry","defaultItem","computed","formTitle","watch","val","close","closeDelete","created","initialize","methods","openQuantityModal","item","closeQuantityModal","addQuantity","updatedProduct","parseInt","post","index","findIndex","product","get","editItem","indexOf","Object","assign","deleteItem","deleteItemConfirm","splice","$nextTick","save","response","put","id","console","log","push"],"sources":["D:\\laragon\\www\\AppDevFinal\\src\\views\\sales\\ProductView.vue"],"sourcesContent":["<template>\r\n    <v-data-table\r\n      :headers=\"headers\"\r\n      :items=\"desserts\"\r\n      :sort-by=\"[{ key: 'name', order: 'desc' }]\"\r\n    >\r\n      <template v-slot:top>\r\n        <v-toolbar\r\n          flat\r\n        >\r\n          <v-toolbar-title>My CRUD</v-toolbar-title>\r\n          <v-divider\r\n            class=\"mx-4\"\r\n            inset\r\n            vertical\r\n          ></v-divider>\r\n          <v-spacer></v-spacer>\r\n          <v-dialog\r\n            v-model=\"dialog\"\r\n            max-width=\"500px\"\r\n          >\r\n            <template v-slot:activator=\"{ props }\">\r\n              <v-btn\r\n                color=\"primary\"\r\n                dark\r\n                class=\"mb-2\"\r\n                v-bind=\"props\"\r\n              >\r\n                New Item\r\n              </v-btn>\r\n            </template>\r\n            <v-card>\r\n              <v-card-title>\r\n                <span class=\"text-h5\">{{ formTitle }}</span>\r\n              </v-card-title>\r\n  \r\n              <v-card-text>\r\n                <v-container>\r\n                  <v-row>\r\n                    <v-col\r\n                      cols=\"12\"\r\n                      sm=\"6\"\r\n                      md=\"4\"\r\n                    >\r\n                      <v-text-field\r\n                        v-model=\"editedItem.upc\"\r\n                        label=\"Universal Product Code\"\r\n                      ></v-text-field>\r\n                    </v-col>\r\n                    <v-col\r\n                      cols=\"12\"\r\n                      sm=\"6\"\r\n                      md=\"4\"\r\n                    >\r\n                      <v-text-field\r\n                        v-model=\"editedItem.name\"\r\n                        label=\"Product Name\"\r\n                      ></v-text-field>\r\n                    </v-col>\r\n                    <v-col\r\n                      cols=\"12\"\r\n                      sm=\"6\"\r\n                      md=\"4\"\r\n                    >\r\n                      <v-text-field\r\n                        v-model=\"editedItem.description\"\r\n                        label=\"Product Description\"\r\n                      ></v-text-field>\r\n                    </v-col>\r\n                    <v-col\r\n                      cols=\"12\"\r\n                      sm=\"6\"\r\n                      md=\"4\"\r\n                    >\r\n                      <v-text-field\r\n                        v-model=\"editedItem.price\"\r\n                        label=\"Price\"\r\n                      ></v-text-field>\r\n                    </v-col>\r\n                    <v-col\r\n                      cols=\"12\"\r\n                      sm=\"6\"\r\n                      md=\"4\"\r\n                    >\r\n                      <v-text-field\r\n                        v-model=\"editedItem.cateogry\"\r\n                        label=\"Category\"\r\n                      ></v-text-field>\r\n                    </v-col>\r\n                  </v-row>\r\n                </v-container>\r\n              </v-card-text>\r\n  \r\n              <v-card-actions>\r\n                <v-spacer></v-spacer>\r\n                <v-btn\r\n                  color=\"blue-darken-1\"\r\n                  variant=\"text\"\r\n                  @click=\"close\"\r\n                >\r\n                  Cancel\r\n                </v-btn>\r\n                <v-btn\r\n                  color=\"blue-darken-1\"\r\n                  variant=\"text\"\r\n                  @click=\"save\"\r\n                >\r\n                  Save\r\n                </v-btn>\r\n              </v-card-actions>\r\n            </v-card>\r\n          </v-dialog>\r\n          <v-dialog v-model=\"dialogDelete\" max-width=\"500px\">\r\n            <v-card>\r\n              <v-card-title class=\"text-h5\">Are you sure you want to delete this item?</v-card-title>\r\n              <v-card-actions>\r\n                <v-spacer></v-spacer>\r\n                <v-btn color=\"blue-darken-1\" variant=\"text\" @click=\"closeDelete\">Cancel</v-btn>\r\n                <v-btn color=\"blue-darken-1\" variant=\"text\" @click=\"deleteItemConfirm\">OK</v-btn>\r\n                <v-spacer></v-spacer>\r\n              </v-card-actions>\r\n            </v-card>\r\n          </v-dialog>\r\n        </v-toolbar>\r\n      </template>\r\n      <template v-slot:item.actions=\"{ item }\">\r\n        <v-icon\r\n          size=\"small\"\r\n          @click=\"openQuantityModal(item)\"\r\n        >\r\n          <v-icon\r\n          size=\"small\"\r\n          @click=\"openQuantityModal(item)\"\r\n        >\r\n          mdi-plus\r\n        </v-icon>\r\n        </v-icon>\r\n        <v-icon\r\n          size=\"small\"\r\n          class=\"me-2\"\r\n          @click=\"editItem(item)\"\r\n        >\r\n          mdi-pencil\r\n        </v-icon>\r\n        <v-icon\r\n          size=\"small\"\r\n          @click=\"openQuantityModal(item)\"\r\n        >\r\n          mdi-plus\r\n        </v-icon>\r\n        \r\n        <router-link :to=\"{ name: 'history', params: { upc: item.upc } }\">\r\n  <v-icon size=\"small\">mdi-history</v-icon>\r\n</router-link>\r\n\r\n      </template>\r\n      <template v-slot:no-data>\r\n        <v-btn\r\n          color=\"primary\"\r\n          @click=\"initialize\"\r\n        >\r\n          Reset\r\n        </v-btn>\r\n      </template>\r\n    </v-data-table>\r\n    <v-dialog v-model=\"quantityModal\" max-width=\"400\">\r\n      <v-card>\r\n        <v-card-title>Add Quantity</v-card-title>\r\n        <v-card-text>\r\n          <!-- Your quantity input field and other necessary fields go here -->\r\n          <v-text-field v-model=\"quantityToAdd\" label=\"Quantity\"></v-text-field>\r\n        </v-card-text>\r\n        <v-card-actions>\r\n          <v-btn @click=\"addQuantity\">Add</v-btn>\r\n          <v-btn @click=\"closeQuantityModal\">Close</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </template>\r\n  <script>\r\n  import axios from 'axios'\r\n    export default {\r\n      data: () => ({\r\n        dialog: false,\r\n        quantityModal: false,\r\n        selectedProduct: null,\r\n        quantityToAdd: 0,\r\n        search: '',\r\n        dialogDelete: false,\r\n      headers: [\r\n              {\r\n                align: 'start',\r\n                key: 'upc',\r\n                sortable: false,\r\n                title: 'UPC',\r\n              },\r\n              { key: 'name', title: 'Name' },\r\n              { key: 'description', title: 'Description' },\r\n              { key: 'quantity', title: 'Current Stocks' },\r\n              { key: 'price', title: 'Price' },\r\n              { key: 'cateogry', title: 'Category' },\r\n              { title: 'Actions', key: 'actions', sortable: false },\r\n            ],\r\n        desserts: [],\r\n        editedIndex: -1,\r\n        editedItem: {\r\n          upc: '',\r\n          name: '',\r\n          description: '',\r\n          quantity: 0,\r\n          price: 0,\r\n          cateogry:''\r\n        },\r\n        defaultItem: {\r\n          upc: '',\r\n          name: '',\r\n          description: '',\r\n          quantity: 0,\r\n          price: 0,\r\n          cateogry:''\r\n        },\r\n      }),\r\n  \r\n      computed: {\r\n        formTitle () {\r\n          return this.editedIndex === -1 ? 'New Item' : 'Edit Item'\r\n        },\r\n      },\r\n  \r\n      watch: {\r\n        dialog (val) {\r\n          val || this.close()\r\n        },\r\n        dialogDelete (val) {\r\n          val || this.closeDelete()\r\n        },\r\n      },\r\n  \r\n      created () {\r\n        this.initialize()\r\n      },\r\n  \r\n      methods: {\r\n        openQuantityModal(item) {\r\n        this.selectedProduct = item;\r\n        this.quantityToAdd = 0;\r\n        this.quantityModal = true;\r\n      },\r\n      closeQuantityModal() {\r\n        this.selectedProduct = null;\r\n        this.quantityToAdd = 0;\r\n        this.quantityModal = false;\r\n      },\r\n      async addQuantity() {\r\n        const updatedProduct = { ...this.selectedProduct };\r\n        updatedProduct.quantity += parseInt(this.quantityToAdd);\r\n        await axios.post('api/updateQuantity', {\r\n          upc: updatedProduct.upc,\r\n          quantity: this.quantityToAdd,\r\n        });\r\n        const index = this.desserts.findIndex((product) => product.upc === updatedProduct.upc);\r\n        this.initialize();\r\n        this.closeQuantityModal();\r\n      },\r\n          async  initialize () {\r\n          const data = await axios.get('api/getProducts');\r\n            this.desserts = data.data;\r\n        },\r\n  \r\n        editItem (item) {\r\n          this.editedIndex = this.desserts.indexOf(item)\r\n          this.editedItem = Object.assign({}, item)\r\n          this.dialog = true\r\n        },\r\n  \r\n        deleteItem (item) {\r\n          this.editedIndex = this.desserts.indexOf(item)\r\n          this.editedItem = Object.assign({}, item)\r\n          this.dialogDelete = true\r\n        },\r\n  \r\n        deleteItemConfirm () {\r\n          this.desserts.splice(this.editedIndex, 1)\r\n          this.closeDelete()\r\n        },\r\n  \r\n        close () {\r\n          this.dialog = false\r\n          this.$nextTick(() => {\r\n            this.editedItem = Object.assign({}, this.defaultItem)\r\n            this.editedIndex = -1\r\n          })\r\n        },\r\n  \r\n        closeDelete () {\r\n          this.dialogDelete = false\r\n          this.$nextTick(() => {\r\n            this.editedItem = Object.assign({}, this.defaultItem)\r\n            this.editedIndex = -1\r\n          })\r\n        },\r\n  \r\n        async save () {\r\n          if (this.editedIndex > -1) {\r\n            // edit\r\n            const response = await axios.put(`api/updateproduct/${this.editedItem.id}`, this.editedItem);\r\n            console.log(response.data);\r\n            Object.assign(this.desserts[this.editedIndex], this.editedItem)\r\n          } else {\r\n            \r\n            const response = await axios.post('api/newproduct', this.editedItem);\r\n            console.log(response.data);\r\n            this.desserts.push(this.editedItem)\r\n          }\r\n          this.close()\r\n        },\r\n      },\r\n    }\r\n  </script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}